<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–ö–ª–∏–∫–µ—Ä —Å –ö–æ—Ç–∏–∫–æ–º –∏ –ú–∏—Å—Å–∏—è–º–∏</title>
<style>
  body {
    text-align: center;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    background:
      linear-gradient(135deg, #5b2c6f 0%, #9b59b6 100%);
    color: #e0d9f5;
  }
  h1 {
    color: #d8b0ff;
    margin-top: 30px;
  }
  #counter {
    font-size: 2em;
    color: #b6a0ff;
    margin-top: 10px;
  }
  #shop {
    margin-top: 30px;
    background-color: rgba(255, 255, 255, 0.15);
    padding: 20px;
    border-radius: 15px;
    display: inline-block;
    text-align: left;
    max-width: 320px;
    color: #f0e9ff;
    box-shadow: 0 0 15px rgba(155, 89, 182, 0.5);
  }
  #missions {
    margin-top: 30px;
    background-color: rgba(0,0,0,0.25);
    padding: 15px;
    border-radius: 12px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
  .mission {
    background: #6b47a7cc;
    margin-bottom: 12px;
    padding: 10px;
    border-radius: 10px;
    color: #fff;
    position: relative;
  }
  .mission p {
    margin: 5px 0;
  }
  .mission button {
    position: absolute;
    right: 10px;
    top: 10px;
    background-color: #ff6699;
    border: none;
    border-radius: 8px;
    padding: 5px 10px;
    cursor: pointer;
    color: #330033;
    font-weight: bold;
    transition: background-color 0.3s ease;
  }
  .mission button:disabled {
    background-color: #666699;
    cursor: default;
    color: #ccc;
  }
</style>
</head>
<body>

<h1>üêæ –ö–ª–∏–∫–µ—Ä —Å –ö–æ—Ç–∏–∫–æ–º –∏ –ú–∏—Å—Å–∏—è–º–∏ üêæ</h1>
<p>–ö–ª–∏–∫–∏: <span id="counter">0</span></p>

<img
  id="pusheen"
  src="https://cdn.imgbin.com/15/0/24/imgbin-gund-pusheen-cat-puffy-stickers-gund-pusheen-cat-puffy-stickers-kitten-cat-5BbiMeLA6QxagF9AwAk27r9n3.jpg"
  alt="–ö–æ—Ç–∏–∫"
  style="width:250px; cursor:pointer; border-radius: 15px;"
/>

<div id="shop">
  <h2>üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω</h2>

  <div class="item">
    <p>–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (+1 –∫–ª–∏–∫ –≤ —Å–µ–∫—É–Ω–¥—É) ‚Äî <strong><span id="autoclickerPrice">50</span></strong> –∫–ª–∏–∫–æ–≤</p>
    <button id="buyAutoclickerBtn">–ö—É–ø–∏—Ç—å</button>
    <p>–£ —Ç–µ–±—è –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–æ–≤: <span id="autoclickers">0</span></p>
  </div>

  <div class="item">
    <p>–£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∏–∫–∞ (+2 –∫–ª–∏–∫–∞ –∑–∞ –∫–ª–∏–∫) ‚Äî <strong><span id="clickUpgradePrice">200</span></strong> –∫–ª–∏–∫–æ–≤</p>
    <button id="buyClickUpgradeBtn">–ö—É–ø–∏—Ç—å</button>
    <p>–£–ª—É—á—à–µ–Ω–∏–π –∫—É–ø–ª–µ–Ω–æ: <span id="clickUpgradesCount">0</span></p>
  </div>

  <button id="resetBtn">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
</div>

<div id="missions">
  <h2>üéØ –ú–∏—Å—Å–∏–∏</h2>
  <div id="missionsContainer"></div>
</div>

<script>
  let counter = parseInt(localStorage.getItem('pusheenClicks')) || 0;
  let autoclickers = parseInt(localStorage.getItem('pusheenAutoclickers')) || 0;
  let clickPower = parseInt(localStorage.getItem('clickPower')) || 1;
  let clickUpgradeCount = parseInt(localStorage.getItem('clickUpgradeCount')) || 0;
  let autoclickerPrice = parseFloat(localStorage.getItem('autoclickerPrice')) || 50;
  let clickUpgradePrice = 200;
  
  let missions = JSON.parse(localStorage.getItem('missions')) || [];
  let missionSkipAttempts = JSON.parse(localStorage.getItem('missionSkipAttempts')) || {};

  const counterEl = document.getElementById('counter');
  const autoclickersEl = document.getElementById('autoclickers');
  const buyAutoclickerBtn = document.getElementById('buyAutoclickerBtn');
  const buyClickUpgradeBtn = document.getElementById('buyClickUpgradeBtn');
  const autoclickerPriceEl = document.getElementById('autoclickerPrice');
  const resetBtn = document.getElementById('resetBtn');
  const pusheen = document.getElementById('pusheen');
  const missionsContainer = document.getElementById('missionsContainer');
  const clickUpgradesCountEl = document.getElementById('clickUpgradesCount');
  const clickUpgradePriceEl = document.getElementById('clickUpgradePrice');

  const possibleMissions = [
    { id: 'm1', desc: '–ù–∞–±—Ä–∞—Ç—å 100 –∫–ª–∏–∫–æ–≤', target: 100, reward: 50 },
    { id: 'm2', desc: '–ù–∞–±—Ä–∞—Ç—å 1000 –∫–ª–∏–∫–æ–≤', target: 1000, reward: 200 },
    { id: 'm3', desc: '–ù–∞–±—Ä–∞—Ç—å 10 000 –∫–ª–∏–∫–æ–≤', target: 10000, reward: 1000 },
    { id: 'm4', desc: '–ù–∞–±—Ä–∞—Ç—å 10 000 000 000 –∫–ª–∏–∫–æ–≤ (–≤–∑—Ä—ã–≤ –º–æ–∑–≥–∞)', target: 10000000000, reward: 0, isFake: true },
    { id: 'm5', desc: '–ù–∞–±—Ä–∞—Ç—å 5000 –∫–ª–∏–∫–æ–≤', target: 5000, reward: 300 },
    { id: 'm6', desc: '–ù–∞–±—Ä–∞—Ç—å 50 000 –∫–ª–∏–∫–æ–≤', target: 50000, reward: 1500 }
  ];

  function saveGame() {
    localStorage.setItem('pusheenClicks', counter);
    localStorage.setItem('pusheenAutoclickers', autoclickers);
    localStorage.setItem('clickPower', clickPower);
    localStorage.setItem('clickUpgradeCount', clickUpgradeCount);
    localStorage.setItem('autoclickerPrice', autoclickerPrice);
    localStorage.setItem('missions', JSON.stringify(missions));
    localStorage.setItem('missionSkipAttempts', JSON.stringify(missionSkipAttempts));
  }

  function updateDisplay() {
    counterEl.textContent = Math.floor(counter);
    autoclickersEl.textContent = autoclickers;
    autoclickerPriceEl.textContent = Math.floor(autoclickerPrice);
    clickUpgradesCountEl.textContent = clickUpgradeCount;
    clickUpgradePriceEl.textContent = clickUpgradePrice * Math.pow(5, clickUpgradeCount);

    buyAutoclickerBtn.disabled = counter < autoclickerPrice;
    buyClickUpgradeBtn.disabled = counter < (clickUpgradePrice * Math.pow(5, clickUpgradeCount));
    buyClickUpgradeBtn.textContent = clickUpgradeCount >= 5 ? '–ú–∞–∫—Å–∏–º—É–º –∫—É–ø–ª–µ–Ω–æ' : '–ö—É–ø–∏—Ç—å';

    updateMissionsDisplay();
    saveGame();
  }

  function updateMissionsDisplay() {
    missionsContainer.innerHTML = '';
    missions.forEach(mission => {
      const missionDiv = document.createElement('div');
      missionDiv.className = 'mission';

      const progress = Math.min(counter - mission.startCounter, mission.target);
      const progressPercent = ((progress / mission.target) * 100).toFixed(1);

      missionDiv.innerHTML = `
        <p><strong>${mission.desc}</strong></p>
        <p>–ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress} / ${mission.target} (${progressPercent}%)</p>
        <button ${missionSkipAttempts[mission.id] >= 10 ? '' : 'disabled'} data-id="${mission.id}">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
      `;

      if (progress >= mission.target) {
        missionDiv.style.backgroundColor = '#3f9e3f';
        missionDiv.innerHTML += `<p style="color:#0f0; font-weight:bold;">–ú–∏—Å—Å–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞! –ù–∞–≥—Ä–∞–¥–∞: ${mission.reward}</p>`;
        missionDiv.querySelector('button').disabled = true;
      }

      missionsContainer.appendChild(missionDiv);
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞
    document.querySelectorAll('#missions button').forEach(btn => {
      btn.onclick = () => {
        const id = btn.getAttribute('data-id');
        if (missionSkipAttempts[id] === undefined) missionSkipAttempts[id] = 0;
        missionSkipAttempts[id]++;
        if (missionSkipAttempts[id] >= 10) {
          skipMission(id);
        } else {
          alert(`–¢—ã –µ—â—ë –Ω–µ –º–æ–∂–µ—à—å –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç—É –º–∏—Å—Å–∏—é. –ü–æ–ø—ã—Ç–æ–∫ –ø—Ä–æ–ø—É—Å–∫–∞: ${missionSkipAttempts[id]}/10`);
        }
        updateDisplay();
      };
    });
  }

  function skipMission(id) {
    const mission = missions.find(m => m.id === id);
    if (!mission) return;
    if (mission.isFake) {
      alert('–≠—Ç–æ –º–∏—Å—Å–∏—è –±–µ–∑ –Ω–∞–≥—Ä–∞–¥—ã! –¢—ã –µ—ë –ø—Ä–æ–ø—É—Å—Ç–∏–ª.');
    } else {
      alert(`–ú–∏—Å—Å–∏—è "${mission.desc}" –ø—Ä–æ–ø—É—â–µ–Ω–∞. –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –Ω–µ—ë –Ω–µ –¥–∞—ë—Ç—Å—è.`);
    }
    missions = missions.filter(m => m.id !== id);
    spawnMissions();
  }

  function spawnMissions() {
    while (missions.length < 3) {
      const candidate = possibleMissions[Math.floor(Math.random() * possibleMissions.length)];
      if (!missions.find(m => m.id === candidate.id)) {
        missions.push({
          id: candidate.id,
          desc: candidate.desc,
          target: candidate.target,
          reward: candidate.reward,
          isFake: candidate.isFake || false,
          startCounter: counter
        });
      }
    }
  }

  pusheen.addEventListener('click', () => {
    counter += clickPower;
    checkMissionsProgress();
    updateDisplay();
  });

  let clickInterval = null;
  pusheen.addEventListener('mousedown', () => {
    if (counter >= 1000000) {
      clickInterval = setInterval(() => {
        counter += clickPower;
        checkMissionsProgress();
        updateDisplay();
      }, 1);
    }
  });
  window.addEventListener('mouseup', () => {
    if (clickInterval) clearInterval(clickInterval);
  });

  function checkMissionsProgress() {
    missions.forEach(mission => {
      const progress = counter - mission.startCounter;
      if (progress >= mission.target && !mission.completed) {
        mission.completed = true;
        if (!mission.isFake) {
          counter += mission.reward;
          alert(`–ú–∏—Å—Å–∏—è "${mission.desc}" –≤—ã–ø–æ–ª–Ω–µ–Ω–∞! –¢—ã –ø–æ–ª—É—á–∏–ª ${mission.reward} –∫–ª–∏–∫–æ–≤!`);
        } else {
          alert(`–ú–∏—Å—Å–∏—è "${mission.desc}" –≤—ã–ø–æ–ª–Ω–µ–Ω–∞! –ù–æ –Ω–∞–≥—Ä–∞–¥—ã –Ω–µ—Ç.`);
        }
        missions = missions.filter(m => m.id !== mission.id);
        spawnMissions();
      }
    });
  }

  buyAutoclickerBtn.addEventListener('click', () => {
    if (counter >= autoclickerPrice) {
      counter -= autoclickerPrice;
      autoclickers++;
      autoclickerPrice *= 1.5;
      updateDisplay();
    } else {
      alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∏–∫–æ–≤!');
    }
  });

  buyClickUpgradeBtn.addEventListener('click', () => {
    if (clickUpgradeCount >= 5) {
      alert('–¢—ã –¥–æ—Å—Ç–∏–≥ –º–∞–∫—Å–∏–º—É–º–∞ —É–ª—É—á—à–µ–Ω–∏–π –∫–ª–∏–∫–∞!');
      return;
    }
    let priceNow = clickUpgradePrice * Math.pow(5, clickUpgradeCount);
    if (counter >= priceNow) {
      counter -= priceNow;
      clickPower += 2;
      clickUpgradeCount++;
      updateDisplay();
    } else {
      alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∏–∫–æ–≤!');
    }
  });

  resetBtn.addEventListener('click', () => {
    if (confirm('–¢—ã —É–≤–µ—Ä–µ–Ω, —á—Ç–æ —Ö–æ—á–µ—à—å —Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å?')) {
      localStorage.clear();
      counter = 0;
      autoclickers = 0;
      clickPower = 1;
      clickUpgradeCount = 0;
      autoclickerPrice = 50;
      missions = [];
      missionSkipAttempts = {};
      spawnMissions();
      updateDisplay();
    }
  });

  // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä: –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–ª–∏–∫–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
  setInterval(() => {
    if (autoclickers > 0) {
      counter += autoclickers;
      checkMissionsProgress();
      updateDisplay();
    }
  }, 1000);

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  if (missions.length === 0) {
    spawnMissions();
  }
  updateDisplay();
</script>

</body>

</html>
